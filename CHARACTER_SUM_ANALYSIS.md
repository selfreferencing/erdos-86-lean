# Character Sum Analysis for ESC Coverage

## Date: January 21, 2025

## 1. Key Simplification: Target is Always -1

For admissible k with gcd(x_k, m_k) = 1:
- x_k âˆˆ H_{x_k} automatically (x_k is a product of generating primes)
- Therefore: -x_k âˆˆ H_{x_k} âŸº -1 âˆˆ H_{x_k}

> **Success for k** âŸº The subgroup generated by prime factors of x_k contains **-1** mod m_k

This is crucial: we're chasing the **fixed involution -1**, not a "random target" -x_k.

---

## 2. Failure Detected by Odd Quadratic Characters Only

If -1 âˆ‰ H_x, then the image of -1 in G/H_x is nontrivial of order 2.

Therefore âˆƒ homomorphism Ïˆ: G/H_x â†’ {Â±1} sending that element to -1.

Composing gives a **quadratic character** Ï‡: G â†’ {Â±1} such that:
- Ï‡(h) = 1 for all h âˆˆ H_x
- Ï‡(-1) = -1 (i.e., Ï‡ is **odd**)

### Exact Equivalence

> **Failure for modulus m**: -1 âˆ‰ H_x
> âŸº âˆƒ odd quadratic character Ï‡ (mod m) such that Ï‡(q) = 1 for every prime q | x

**All prime factors of x lie in the kernel of some odd quadratic character.**

### Connection to Resistant = GÂ²

Kernels of quadratic characters are index-2 subgroups. The intersection of all kernels is precisely the subgroup of squares GÂ². The **only systematic obstruction** to getting -1 is quadratic.

### Count of Odd Quadratic Characters for Our Moduli

| Modulus Type | # Odd Quadratic Characters |
|--------------|---------------------------|
| Prime m â‰¡ 3 (mod 4) | 1 |
| Prime-power | 1 |
| Two distinct primes (15, 39, 55, 87, 95, 119, 159) | 2 |

---

## 3. Probabilistic Bound for Fixed k

### The Sieve Setup

Fix m and an odd quadratic Ï‡ (mod m). Define "forbidden primes":
```
F_Ï‡ = {q prime : qâˆ¤m, Ï‡(q) = -1}
```

By Dirichlet/Chebotarev:
```
density(Ï‡(q) = -1) â‰ˆ 1/2
```

### Failure as a Sieve Event

```
Ï‡(q) = 1 âˆ€q|x  âŸº  x has NO prime factor in F_Ï‡
```

"Failure via Ï‡" means x avoids a set of primes of density ~1/2.

### Selberg-Delange/Wirsing Estimate

For allowed primes of density Î´, count of integers â‰¤ X composed only of allowed primes is:
```
â‰ X(log X)^{Î´-1}
```

Here Î´ â‰ˆ 1/2, so:
```
P(Ï‡(q) = 1 âˆ€q|x) â‰ˆ C_Ï‡ / (log x)^{1/2}
```

### Union Over Characters

Each m_k has only 1 or 2 odd quadratic characters, so:
```
P(failure for k) â‰¤ Î£_Ï‡ P(Ï‡(q) = 1 âˆ€q|x_k) â‰ˆ C_k / (log p)^{1/2}
```

> **For a fixed modulus m_k, failure probability decays like (log p)^{-1/2}**

---

## 4. Probability All 23 Moduli Fail Simultaneously

### Guaranteed Bound (No Independence Needed)

```
P(âˆ©_k F_k) â‰¤ min_k P(F_k) â‰ˆ O((log p)^{-1/2})
```

Even without independence, total failure probability â†’ 0.

### Near-Independence Heuristic

Model the 23 events as roughly independent:
- 16 moduli with ~1 odd quadratic character
- 7 moduli with ~2 odd quadratic characters
- At most 2^7 = 128 ways to choose "which character causes failure"

For a fixed choice (Ï‡_k), probability that **every** x_k avoids F_{Ï‡_k}:
```
â‰ˆ (log p)^{-23/2}
```

Union over â‰¤ 128 choices:
```
P(all 23 fail) â‰² 128 Ã— (log p)^{-23/2}
```

**This is extremely small even for moderately large p.**

---

## 5. Character Sum Approach: Technical Route

### Step 1: Write Failure Indicator

```
ðŸ™[-1 âˆ‰ H_{x_k}] â‰¤ Î£_{Ï‡ âˆˆ X_k^-} ðŸ™(Ï‡(q) = 1 âˆ€q|x_k)
```

where X_k^- is the (tiny) set of odd quadratic characters mod m_k.

### Step 2: Inclusion-Exclusion

For fixed Ï‡, write "no forbidden prime factor" indicator:
```
ðŸ™(gcd(x_k, P_Ï‡(z)) = 1) = Î£_{d|P_Ï‡(z)} Î¼(d) ðŸ™(d|x_k)
```

where P_Ï‡(z) is product of forbidden primes â‰¤ z.

### Step 3: Sum Over Primes

Sum over primes p â‰¤ P with p â‰¡ 1 (mod 4).

Since x_k = (p + m_k)/4, condition d|x_k becomes:
```
p â‰¡ -m_k (mod 4d)
```

### Step 4: Prime AP Distribution

Need estimates for primes in arithmetic progressions mod 4d, averaged over d.

**This is exactly where character sums / L-function bounds enter:**
- Bombieri-Vinogradov (unconditional)
- GRH (stronger uniformity)

### Result

```
#{p â‰¤ P : p prime, F_k(p)} â‰ª P / (log P)^{3/2}
```

Among primes up to P, proportion â‰ª (log P)^{-1/2} fail for fixed k.

Then:
```
Î£_{pâ‰¤P} Î£_k ðŸ™(F_k(p)) â‰ª 23 Ã— P / (log P)^{3/2}
```

> **Average number of failing k's per prime tends to 0**

---

## 6. Threshold via Ï‰(x_k)

Fix modulus m and odd quadratic Ï‡. If prime factors of x behave "randomly" w.r.t. Ï‡:
```
P(Ï‡(q) = 1 âˆ€q|x | Ï‰(x) = t) â‰ˆ 2^{-t}
```

(Each new independent prime factor has ~50/50 chance.)

With |X^-| âˆˆ {1, 2}:
```
P(failure | Ï‰(x) = t) â‰² |X^-| Ã— 2^{-t}
```

### Threshold Statement

If t â‰¥ c log log p, then 2^{-t} â‰¤ (log p)^{-c log 2}.

Failure probability â‰ª (log p)^{-c log 2}, polynomially small in log p.

**Failure collapses fast as Ï‰ grows even modestly.**

---

## 7. Summary Table

| Quantity | Estimate |
|----------|----------|
| P(k fails) | ~ C_k / (log p)^{1/2} |
| P(all 23 fail), no independence | â‰¤ O((log p)^{-1/2}) |
| P(all 23 fail), near-independent | ~ 128 Ã— (log p)^{-23/2} |
| # failures per prime (average) | â†’ 0 |
| Threshold for guaranteed success | Ï‰(x_k) â‰³ c log log p |

---

## 8. Connection to Resistant Classes

Resistant classes = GÂ² âŠ† (â„¤/840â„¤)* are exactly the quadratic-character story:

- Quadratic characters cut G into squares vs nonsquares
- If all prime factors of x_k lie in kernel of some odd Ï‡, subgroup misses -1 â†’ failure
- "Resistant" primes: multiple small-modulus quadratic constraints line up

Extra moduli in K_COMPLETE help because each introduces a (mostly independent) odd quadratic constraint. Total failure requires many simultaneous "all prime factors in good half" events â†’ sieve exponent effect.

---

## 9. Bottom Line

| Fact | Statement |
|------|-----------|
| Structural | Success âŸº -1 âˆˆ H_{x_k}. Failure âŸº âˆƒ odd quadratic Ï‡ with Ï‡(q) = +1 on all prime factors |
| Single k | P(F_k) â‰ˆ C_k (log p)^{-1/2} |
| All 23 fail | â‰² 128 Ã— (log p)^{-23/2} (heuristic) or â‰¤ (log p)^{-1/2} (guaranteed) |
| Analytic route | Sieve on x_k = (p+m_k)/4 + prime-in-AP estimates (BV or GRH) |

---

## 10. Why Quadratic Characters Are the ONLY Obstruction (GPT Response B)

### The Maximal Subgroup Argument

If -1 âˆ‰ H_x, then H_x sits inside a maximal subgroup M âŠ‚ G_k that also misses -1.

If M is maximal, then G_k/M is a **simple finite abelian group**, hence cyclic of **prime order â„“**.

The image of -1 in G_k/M has order dividing 2 (since -1 has order 2 in G_k). Since -1 âˆ‰ M, that image is nontrivial, so its order is exactly 2.

**Therefore â„“ = 2.**

### Conclusion

> **Every maximal subgroup that can "explain" failure has index 2.**
>
> Failure can ONLY be witnessed by quadratic characters.
> Higher-order characters (order 3, 5, ...) CANNOT be the final obstruction.

This is not just convenience - it's **structurally forced** by the fact that the target element (-1) has order 2.

---

## 11. Numerical Estimate at p = 10^8

At p â‰¤ 10^8:
- log p â‰ˆ 18.42
- (log p)^{-23/2} â‰ˆ 2.8 Ã— 10^{-15}

Expected number of global failures up to 10^8:
```
Ï€(10^8) Ã— (log p)^{-23/2} â‰ˆ 5.8 Ã— 10^6 Ã— 2.8 Ã— 10^{-15} â‰ˆ 1.6 Ã— 10^{-8}
```

**Expected failures â‰ª 1**, consistent with 100% empirical coverage.

---

## 12. The Ï‰(x_k) Threshold (Precise Statement)

Let r = Ï‰(x_k) and N_k = number of quadratic Ï‡ mod m_k with Ï‡(-1) = -1.

Treating prime factor residues as "random":
```
P(-1 âˆ‰ H_{x_k} | Ï‰(x_k) = r) â‰² N_k Ã— 2^{-r}
```

### Threshold for Summable Tails

If r â‰¥ c log log p with c > 1/log 2 â‰ˆ 1.44:
```
P(fail at k) â‰² N_k (log p)^{-c log 2}
```

With c > 1.44, the exponent exceeds 1, giving summable tails over p.

### Why This Works in Practice

Since Ï†(m_k) â‰¤ 166, group ranks are tiny. Once you have even a handful of "independent" prime factors, H_{x_k} tends to be large, and the chance it misses -1 collapses.

---

## 13. Two Angles on the Same Phenomenon

### Group Angle
GÂ² (square subgroup) = intersection of kernels of all quadratic characters.

If all generators lie in a single kernel that excludes -1, you can't generate -1.

### Character/Sieve Angle
Failure happens when x_k is composed entirely of primes in the (+1) side of some quadratic Ï‡ with Ï‡(-1) = -1.

### Why Resistant = GÂ²

The resistant classes mod 840 are exactly the square subgroup because:
> The hardest primes are those for which multiple **independent quadratic characters** take the "good" value simultaneously.

Each independent quadratic condition costs a **factor of 1/2** in density.

K_COMPLETE succeeds because its moduli encode enough independent quadratic characters (including cross-filters 55, 77) that the set of primes dodging all those quadratic "hooks" becomes extremely thin.

---

## 14. Complete Probabilistic Picture

| Level | Probability | Comment |
|-------|-------------|---------|
| Single Ï‡ | ~1/âˆš(log p) | Half the primes are "forbidden" |
| Single k | ~C_k/âˆš(log p) | Union over 1-2 characters |
| All 23 k | ~C/(log p)^{11.5} | Product of independent events |
| Expected failures to 10^8 | ~10^{-8} | Much less than 1 |

The exponent 23/2 = 11.5 is so steep that even with correlations and constant factors, essentially no counterexamples exist in computational ranges.
