# GPT Prompt 24: Character-Kernel / Quadratic Orders / Genus Character Dictionary

## Context (follow-up to your previous response)

In your previous response (prompt 15), you offered to "sketch the character-kernel <-> quadratic orders <-> genus character dictionary in full algebraic detail." We are accepting that offer.

## Background

We are proving the Erdos-Straus conjecture for primes P === 1 (mod 24). The central algebraic obstruction identified across prompts 14-15 is:

**Character-kernel lemma:** "P + 4*alpha*s^2 has no divisor d === -1 (mod 4*alpha*s)" is equivalent to: there exists an odd quadratic character chi (mod 4*alpha*s) with chi(-1) = -1 such that chi(q) = +1 for every prime q | (P + 4*alpha*s^2) coprime to 4*alpha*s.

This is the EXACT algebraic structure of the obstruction. Both prompt 14 responses and both prompt 15 responses converge on this formulation.

## What we also know

1. **From prompt 15A:** The correct algebraic framework uses characters mod 4*alpha*s, NOT Q(sqrt(-alpha*P)). All prime factors of P + 4*alpha*s^2 automatically split in Q(sqrt(-alpha*P)), so that ring gives no information.

2. **From prompt 15B:** The "right" quadratic fields are those attached to Dirichlet characters mod 4*alpha*s (and their conductors). For class number 1 fields (Q(i), Q(sqrt(-2)), Q(sqrt(-3))): ideal norm = element norm. For general alpha, the class group enters.

3. **From prompt 14B:** Erdos-Hall (1976) has an index-2 group lemma tailor-made for this situation: it controls when subset products in a finite abelian group fail to leave an index-2 subgroup.

## What I need from you

### Task 1: The full dictionary

Build the complete correspondence between three viewpoints:

**Column A: Characters**
- Odd quadratic character chi (mod m) with chi(-1) = -1
- Kernel K = {a in (Z/mZ)* : chi(a) = +1}, an index-2 subgroup
- "Bad primes" for this character: primes q with chi(q) = +1 (i.e., q in K)
- Failure for (alpha, s): all prime factors of P + 4*alpha*s^2 are in K

**Column B: Quadratic orders**
- Quadratic field K_chi = Q(sqrt(D)) where D is the discriminant of chi
- Ring of integers O_D (or order of conductor f)
- "Bad primes" = primes that SPLIT in K_chi
- Failure: P + 4*alpha*s^2 is a norm from O_D (or lies in the norm semigroup)

**Column C: Genus theory / binary quadratic forms**
- Binary quadratic form of discriminant D
- Genus characters = the quadratic characters factoring through (Z/DZ)*
- "Bad primes" = primes represented by the principal genus
- Failure: P + 4*alpha*s^2 is represented by a form in the principal genus

For each of our specific (alpha, s) pairs (at least alpha=1 with s=1,2,3,4,5), make this dictionary fully explicit:
- What is m = 4*alpha*s?
- What are the odd quadratic characters with chi(-1) = -1?
- What is D for each?
- What is the corresponding quadratic field?
- What are the "bad" (splitting) primes, by residue class?

### Task 2: The alpha=1 special case in full detail

For alpha=1, the modulus is m = 4s. Work out:

s=1: m=4. Only odd character mod 4 is chi_4 = (-1/n). D = -4, field Q(i). Bad primes: p === 1 (mod 4). Failure: P+4 has all primes === 1 (mod 4), i.e., P+4 is a sum of two squares (h(Q(i))=1).

s=2: m=8. Characters mod 8 with chi(-1)=-1. D = ? Field = ? Bad primes = ?

s=3: m=12. Characters mod 12 with chi(-1)=-1. D = ? Field = ? Bad primes = ?

s=4: m=16. Characters mod 16 with chi(-1)=-1.

s=5: m=20. Characters mod 20 with chi(-1)=-1.

For each: state the failure condition as a representability condition by a specific binary quadratic form.

### Task 3: Interactions between different s values

When failure occurs simultaneously for s=1 AND s=2, the prime P satisfies:
- P+4 has all primes in K_1 (the kernel for s=1)
- P+8 has all primes in K_2 (the kernel for s=2)

These are conditions on the prime factorizations of TWO numbers (P+4 and P+8) that differ by 4. The interaction is controlled by:
- Primes dividing both P+4 and P+8 (only primes dividing 4, i.e., p=2)
- The correlation between being in K_1 and K_2 for a generic prime q

Compute: for a prime q, what is the joint probability that q is in K_1 AND K_2? How does this compare to the product of marginals? Is there positive or negative correlation?

### Task 4: Connection to Erdos-Hall

The Erdos-Hall index-2 group lemma says: in a finite abelian group G with index-2 subgroup H, if g_1, ..., g_k are elements of G, then all subset products {g_{i_1} * ... * g_{i_j}} lie in H iff all g_i are in H.

In our setting: G = (Z/mZ)*, H = ker(chi), generators = prime factors of N = P + 4*alpha*s^2.

The condition "all divisors of N are in H (i.e., all generators are in H)" is equivalent to "N is in the multiplicative semigroup generated by primes in H."

State the Erdos-Hall result precisely in this language, and derive: what is the probability that a "random" number of size N has all its prime factors in H?

### Task 5: Lean formalization roadmap

Which dictionary entries are formalizable in Lean 4 with current Mathlib?

Specifically:
- Quadratic characters mod m: Does Mathlib have DirichletCharacter? QuadraticChar?
- Kernels of characters: Can we compute ker(chi) for specific m?
- The equivalence "no divisor === -1 (mod m) <=> exists chi with ..." Is this purely group theory (finite group, subset products, index-2 subgroups)?

State the key lemma in Lean-like syntax and assess which Mathlib imports would be needed.

## Constraints

- Be fully explicit for the small cases (s=1 through s=5)
- The dictionary should be a reference table, not just abstract correspondence
- Connections to Cox's "Primes of the form x^2 + ny^2" are welcome
- Prioritize the characterization of "bad primes" by residue class, as this directly feeds into the sieve
