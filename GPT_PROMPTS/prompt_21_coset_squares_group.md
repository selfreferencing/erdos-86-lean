# GPT Prompt 21: Group-Theoretic Covering Framework via Coset-of-Squares

## Context (follow-up to your previous response)

In your previous response (prompt 12), you offered to "formalize the coset-of-squares lemma into a clean group-theoretic framework for building covering systems." We are accepting that offer.

## Background

We are proving the Erdos-Straus conjecture for primes P === 1 (mod 24), P >= 10^6. The key condition is:

**For every such P, there exist positive integers alpha, s, r such that (4*alpha*s*r - 1) divides (P + 4*alpha*s^2).**

From prompt 12, you established that for a prime p and fixed alpha, the set of residues P (mod p) covered by the D.6 condition is exactly (-alpha) * QR(p), i.e., the coset of quadratic residues scaled by -alpha. The valid alphas for prime p === 3 (mod 4) are exactly the quadratic non-residues mod p.

## What we now know

1. **Character-kernel lemma (prompt 14):** Failure for pair (alpha, s) means all prime factors of P + 4*alpha*s^2 land in the kernel of some odd quadratic character chi (mod 4*alpha*s) with chi(-1) = -1. This is the exact algebraic obstruction.

2. **No finite alpha-set works locally:** For any finite set {alpha_1, ..., alpha_k}, Chebotarev gives infinitely many primes p where all alpha_i are QRs mod p, so none covers any new residue.

3. **CRT sign-pattern realizability:** For primes p_1, ..., p_k and any signs eps_i in {+1, -1}, infinitely many alpha satisfy (-alpha/p_i) = eps_i simultaneously.

## What I need from you

### Task 1: The group-theoretic formulation

For each prime q, define the group G_q = (Z/qZ)* and the subgroup H_q = QR(q) (index 2 for q odd).

The D.6 condition at prime q says: P + 4*alpha*s^2 === 0 (mod q) for some r, which means q | (P + 4*alpha*s^2) and q is in a specific coset of H_q modulo 4*alpha*s.

Formalize this as: for each (alpha, s), success requires a prime factor q of P + 4*alpha*s^2 to land in a specific coset of a specific subgroup of (Z/4*alpha*s*Z)*.

State the group-theoretic covering problem precisely:

**Given a collection of groups G_i = (Z/m_i*Z)* and index-2 subgroups H_i, and target cosets C_i = (-1)*H_i, show that the multiplicative semigroups generated by primes NOT in C_i cannot simultaneously contain all of N_1, ..., N_k where N_i = P + h_i.**

### Task 2: The Erdos-Renyi / Erdos-Hall connection

From prompt 14B: the right combinatorial framework is Erdos-Renyi subset-product coverage in finite abelian groups. The Erdos-Hall index-2 lemma is tailor-made for our obstruction.

State the Erdos-Hall lemma precisely in our notation. Given a finite abelian group G and an index-2 subgroup H, with random generators g_1, ..., g_k drawn from G, what is the probability that all subset products land in H?

How does this connect to our problem? Each prime factor q of N_i gives a "generator" in (Z/m_i*Z)*. We need at least one subset product (= divisor) to land outside H_i (i.e., in the coset -1 * H_i).

### Task 3: From group theory to covering system

Can the group-theoretic framework produce an EXPLICIT covering system? Specifically:

For each (alpha_j, s_j) pair, we get moduli m_j = 4*alpha_j*s_j. Can you construct explicit triples (alpha_j, s_j, r_j) such that the covered residue classes

{P : P === -4*alpha_j*s_j^2 (mod 4*alpha_j*s_j*r_j - 1)}

cover all of Z/L*Z for some modulus L, restricted to P === 1 (mod 24)?

If a full covering is impossible (as we suspect for any fixed finite set), state precisely WHAT FRACTION of residues mod L can be covered, and identify the uncovered classes.

### Task 4: The "moving modulus" complication

The classical covering system has fixed moduli. Our system has moduli M = 4*alpha*s*r - 1 that depend on r. As r varies, M varies, giving different moduli for the same (alpha, s) pair.

Formalize: for fixed (alpha, s), the covered residues for P (mod M) as r varies over positive integers generate a set of covered residues modulo various M. What is the density of primes P covered by at least one choice of r?

This is where the sieve argument from prompt 16 enters: each prime q === -1 (mod 4*alpha*s) can serve as M (or a factor of M), covering the residue P === -4*alpha*s^2 (mod q).

### Task 5: Lean formalization targets

Which parts of this group-theoretic framework are directly formalizable in Lean 4?

Candidates:
- The character-kernel equivalence (pure finite group theory)
- The index-2 subgroup structure of (Z/mZ)* for specific m
- The CRT realizability of sign patterns
- The Erdos-Hall lemma (if it has a clean combinatorial proof)

For each, sketch the Lean statement (in informal Lean-like syntax) and assess difficulty.

## Constraints

- Keep the group theory elementary (finite abelian groups, characters, subgroups). No algebraic geometry.
- The framework should be constructive where possible.
- State definitions and lemmas in a form that could serve as Lean 4 theorem statements.
